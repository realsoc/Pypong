var mongoose = require('mongoose'); 
var schemas = require('config/models');    
var Player = schemas.Player;

exports.addPlayer = function(name) {
	var newPlayer = new Player({
		name 	: 	name
	});
	newPlayer.save(function (err){
				console.log("Player registered successfully");
			});	
}
exports.getAll = function(callback,res) {  
	Player.find({},function(err,players){
		callback(res,players);
	});
}
exports.removeById = function(id){	
	Player.remove(
		{'_id' : id},
		function(err,game){
			if(err){
				console.log("Error: "+err);
			}
		});
}
exports.testAndAddPlayer = function(res,name){
	Player.findOne({'name' : name},function(err,player){
		console.log(player);
		if(player != null){
			res.status(202).send('{"result" : "Already exists"}');
		}else{
			var newPlayer = new Player({
				name 	: 	name
			});
			newPlayer.save(function (err){
				console.log("Player registered successfully");
			});	
			res.status(201).send('{"result" : "ok"}');
		}
	});
}